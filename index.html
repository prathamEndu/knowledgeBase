<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bhutan Drone Demo Report</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main id="main-content">
    <header>
      <h1><span>üöÅ Bhutan Drone Delivery Mission Report  </span><button id="theme-toggle" type="button" class="ctrl-btn" aria-pressed="false"></button></h1>
      <p>Autonomous 20KG Rice Bag Delivery to Phojoding Monastery</p>
    </header>
    <!-- Overlay for TOC (click to close on mobile/desktop) -->
    <div id="toc-overlay" aria-hidden="true"></div>
  
    <!-- Left sidebar Table of Contents -->
    <section id="toc" class="toc-sidebar">
      <button class="toc-handle" type="button" aria-label="Toggle table of contents" aria-expanded="true"></button>
      <div class="toc-inner">
        <div class="toc-controls">
          <button id="toc-collapse-all" type="button" class="ctrl-btn">Collapse All</button>
          
        </div>
        <h2>üìé Table of Contents</h2>
        <div class="links-tree">
      <ul>
        <li>
          <a href="#problem">üéØ Problem</a>
          <ul>
            <li><a href="#config">‚öôÔ∏è Configuration</a></li>
            <li><a href="#recce">üîç Recce</a></li>
          </ul>
        </li>
        <li>
          <a href="#mission">üó∫Ô∏è Mission</a>
          <ul>
            <li><a href="#mission-links">üìã Links</a></li>
            <li><a href="#mission-base-to-monastery">üß≠ Base ‚Üí Monastery</a></li>
            <li><a href="#mission-monastery-to-base">üß≠ Monastery ‚Üí Base</a></li>
          </ul>
        </li>
        <li>
          <a href="#daily">üìÖ Daily Tasks</a>
          <ul>
            <li><a href="#issues">‚ö†Ô∏è Issues</a></li>
            <li><a href="#suggestions">üí° Suggestions</a></li>
          </ul>
        </li>
      </ul>
        </div>
      </div>
    </section>

    <section id="problem">
      <h2>üéØ Problem Statement</h2>
      <div class="problem-statement">
        <strong>Mission Objective:</strong> Deliver a 20KG rice bag to <strong>Phojoding Monastery, Thimphu, Bhutan</strong> starting from <strong>BBS Radio Tower, Thimphu, Bhutan</strong> using an autonomous drone.
        <br><br>
        <strong>Platform:</strong> Sabal 20 with Auto Mission capability
        <br><br>
        <img src="assets/Mission.png" alt="Mission overview" />
      </div>
    </section>

    <section id="config">
      <h3>‚öôÔ∏è Proposed vs Implemented Configuration</h3>
      <table>
        <tr><th>Component</th><th>Proposed</th><th>Implemented</th></tr>
        <tr><td>System</td><td>EC 20.7</td><td>EC 20.7</td></tr>
        <tr><td>Battery</td><td>4x GenX 29Ah OR 4x MPower 30Ah</td><td>4x GenX 29Ah</td></tr>
        <tr><td>Blade</td><td>990mm non foldable</td><td>990mm non foldable</td></tr>
        <tr><td>RPM</td><td>1300 - 1330</td><td>1300</td></tr>
        <tr><td>RC (at base location only)</td><td>Futaba T10J</td><td>Futaba T10J</td></tr>
        <tr><td>GPS</td><td>Holybro F9P or Here 4 or Neo 3 pro</td><td>Holybro F9P and Here 4 (without RTK base)</td></tr>
        <tr><td>Comms</td><td>Taisync S band / QuadBand / L band</td><td><b>Comms 1:</b> Taisync QuadBand (small white omni antenna x2 Parallel)<br><b>Comms 2:</b> RFD at 30db (separate power) (base RFD antenna x2 Perpendicular)</td></tr>
        <tr><td>GCS</td><td>Getac at base with tracker + omni antenna</td><td><b>Base:</b> Getac with Taisync QuadBand sector + omni<br><b>Monastery:</b> Lenovo ideapad with RFD at 30db</td></tr>
        <tr><td>Payload</td><td>20KG</td><td>10KG</td></tr>
      </table>
    </section>

    <section id="recce">
      <h3>üîç Recce Tests Conducted</h3>
      <ul>
        <li>GPS module selection based on Nsats, Hdop, Vdop, Hacc, Vacc (Holybro F9p, Here 4 were finalized)</li>
        <li>Spectrum analyzer test: to check background noise in S band, Quad band, L band frequencies(no interference)</li>
        <li>Wind speed check (3-4 m/s during recce)</li>
        <li>Takeoff and Landing Location visual survey for arrangements of GCS, mast, etc. (clear line of sight observed)</li>
        <li>RTK survey for coordinates and AMSL of base and monastery</li>
      </ul>

      <h3>üìç Location Coordinates</h3>
      <table>
        <tr><th>Location</th><th>Latitude</th><th>Longitude</th><th>AMSL (m)</th></tr>
        <tr><td>Monastery</td><td class="coordinates">27.4890358098142</td><td class="coordinates">89.574760012183</td><td>3580.6</td></tr>
        <tr><td>Base</td><td class="coordinates">27.4835963118182</td><td class="coordinates">89.6237514837643</td><td>2644.65</td></tr>
      </table>
    </section>

    <section id="mission">
      <h2>üó∫Ô∏è Mission Planning</h2>
      <div style="text-align: center; margin: 20px 0;">
        <h3>üìç Bhutan Demo Mission Flight Path</h3>
        <img id="mission-path-image" src="assets/pseudoMission_light.jpg" data-src-light="assets/pseudoMission_light.jpg" data-src-dark="assets/pseudoMission_dark.jpg" alt="Bhutan Demo Mission Flight Path" class="mission-image">
        <br><small style="color: #7f8c8d;">Mission planning and flight path visualization</small>
      </div>
      
      <h3 id="mission-links">üìã Relevant Links</h3>
      <div class="links-tree">
        <ul>
          <li>üìÅ <a href="https://endureair1.sharepoint.com/:f:/s/FlightOperations/Eq8afsEeLX9Om5en1zWh1aAB_C-XFTLlVgsI98cZZKKQIQ?e=RpXbhR">All Bhutan Demo Documents</a>
            <ul>
              <li>üìÑ <a href="https://endureair1.sharepoint.com/:b:/s/FlightOperations/Ea4AnkyJHIxLsMpQ-3cRuesB3q-higOv_Nw4UMAH0Ba-tg?e=FhgdJS">Official Pilot Report</a></li>
              <li>üìä <a href="https://endureair1-my.sharepoint.com/:x:/g/personal/ishika_jain_endureair_tech/ET_Jh2jfgdtJo_1H77MxOHUBHEeGN15gc_q72Pq4Yxal2g?e=Wb33rY">Excel Tracking Sheet</a></li>
              <li>üìÅ <a href="https://endureair1.sharepoint.com/:f:/s/FlightOperations/EkdvMeBMUwlGuW5DZU1s4SkBtqf8EFHrnhc3LE0_ijLKvA?e=86y20I">Flight Logs & Data</a></li>
              <li>üó∫Ô∏è <a href="https://endureair1.sharepoint.com/:f:/s/FlightOperations/ElCLSa8_VstGkUYer5FrHIUBeRCYqv2d3fw5ui1dIBu47w?e=9lFjz8">Mission Plan Files</a></li>
            </ul>
          </li>
        </ul>
      </div>

      <h3 id="mission-base-to-monastery">üß≠ Base ‚Üí Monastery Mission Plan</h3>
      <p style="color:#546e7a; margin-top:-8px">Click any row to update the column headings in this table for that command.</p>

      <!-- Mission table: populated dynamically from script.js -->
      <div style="display:flex; justify-content: space-between; align-items:center; gap:12px; margin-top:8px;">
        <div></div>
        <button id="mission-advanced-toggle" class="filter-btn" type="button" title="Show/hide advanced columns">Advanced</button>
      </div>
      <div id="mission-table-container">
        <table id="mission-table" class="mission-table hide-advanced">
          <thead>
            <tr>
              <th>Sr. No</th><th>Command</th><th>P1</th><th>P2</th><th>P3</th><th>P4</th><th>Lat</th><th>Long</th><th>Alt</th><th>Frame</th><th>Grad %</th><th>Angle</th><th>Dist</th><th>AZ</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows will be injected by script.js -->
          </tbody>
        </table>
      </div>

      <h3 id="mission-monastery-to-base" style="margin-top:28px;">üß≠ Monastery ‚Üí Base Mission Plan</h3>
      <p style="color:#546e7a; margin-top:-8px">All features are the same. Click any row to update the header for that command.</p>
      <div style="display:flex; justify-content: space-between; align-items:center; gap:12px; margin-top:8px;">
        <div></div>
        <button id="mission-advanced-toggle-2" class="filter-btn" type="button" title="Show/hide advanced columns">Advanced</button>
      </div>
      <div id="mission-table-container-2">
        <table id="mission-table-2" class="mission-table hide-advanced">
          <thead>
            <tr>
              <th>Sr. No</th><th>Command</th><th>P1</th><th>P2</th><th>P3</th><th>P4</th><th>Lat</th><th>Long</th><th>Alt</th><th>Frame</th><th>Grad %</th><th>Angle</th><th>Dist</th><th>AZ</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows will be injected by script.js -->
          </tbody>
        </table>
      </div>
    </section>

    <section id="daily">
      <h2>üìÖ Day-wise Tasks, Issues, Suggestions</h2>
      <table>
        <tr><th>Day</th><th>Tasks</th><th>Issues</th><th>Suggestions</th></tr>
        <tr>
          <td>1</td>
          <td>
            ‚Ä¢ New base recce (BBS Radio tower)<br>
            ‚Ä¢ GPS Nsats, dop, acc test<br>
            ‚Ä¢ RTK positioning<br>
            ‚Ä¢ Taisync quadband and S band SNR test
          </td>
          <td><a href="#I1">I1</a></td>
          <td><a href="#S1">S1</a>, <a href="#S2">S2</a></td>
        </tr>
        <tr>
          <td>2</td>
          <td>
            ‚Ä¢ Ground test of pitot tube<br>
            ‚Ä¢ Ground test of parachute<br>
            ‚Ä¢ Payload drop test<br>
            ‚Ä¢ Basic craft performance, CG, param, GPS tests
          </td>
          <td><a href="#I2">I2</a></td>
          <td><a href="#S3">S3</a>, <a href="#S4">S4</a>, <a href="#S5">S5</a>, <a href="#S6">S6</a></td>
        </tr>
        <tr>
          <td>3</td>
          <td>
            ‚Ä¢ Hover tests with payloads for current and temperature
          </td>
          <td><a href="#I3">I3</a></td>
          <td><a href="#S7">S7</a></td>
        </tr>
        <tr>
          <td>4</td>
          <td>
            ‚Ä¢ Auto missions
          </td>
          <td><a href="#I4">I4</a></td>
          <td><a href="#S8">S8</a></td>
        </tr>
        <tr>
          <td>5</td>
          <td>
            ‚Ä¢ Hover tests with payloads for current and temperature
          </td>
          <td><a href="#I5">I5</a></td>
          <td><a href="#S9">S9</a></td>
        </tr>
        <tr>
          <td>6</td>
          <td>
            ‚Ä¢ Few tests, RFD configuration
          </td>
          <td><a href="#I6">I6</a></td>
          <td><a href="#S5">S5</a>, <a href="#S10">S10</a></td>
        </tr>
        <tr>
          <td>7</td>
          <td>
            ‚Ä¢ Auto mission to monastery with 1kg payload and lots of altitude margin
          </td>
          <td><a href="#I7">I7</a>, <a href="#I8">I8</a>, <a href="#I9">I9</a></td>
          <td><a href="#S11">S11</a>, <a href="#S12">S12</a>, <a href="#S13">S13</a></td>
        </tr>
        <tr>
          <td>8</td>
          <td>
            ‚Ä¢ Final demo of 10kg rice bag delivery to monastery
          </td>
          <td><a href="#I10">I10</a>, <a href="#I11">I11</a>, <a href="#I12">I12</a>, <a href="#I13">I13</a></td>
          <td><a href="#S11">S11</a>, <a href="#S13">S13</a>, <a href="#S15">S15</a>, <a href="#S16">S16</a></td>
        </tr>
      </table>
    </section>

    <section id="issues">
      <h3>‚ö†Ô∏è Issues Encountered</h3>
      <div class="filter-bar" id="tag-filter-bar">
        <button class="filter-btn active" data-tag="all">All</button>
        <button class="filter-btn" data-tag="documentation">Documentation</button>
        <button class="filter-btn" data-tag="hardware">Hardware</button>
        <button class="filter-btn" data-tag="firmware">Firmware</button>
        <button class="filter-btn" data-tag="sensor">Sensor</button>
        <button class="filter-btn" data-tag="resources">Resources</button>
        <button class="filter-btn" data-tag="planning">Planning</button>
        <button class="filter-btn" data-tag="procedure">Procedure</button>
        <button class="filter-btn" data-tag="software">Software</button>
        <button class="filter-btn" data-tag="safety">Safety</button>
        <button class="filter-btn" data-tag="customer">Customer</button>
      </div>
      <div id="I1" class="issue"><strong>I1</strong> <span class="tag tag-documentation">Documentation</span> - Taisync setup and configuration took time, reading and understanding webview page was difficult</div>
      <div id="I2" class="issue"><strong>I2</strong> <span class="tag tag-documentation">Documentation</span> - Pitot tube wiring took time due to missing documentation</div>
      <div id="I3" class="issue"><strong>I3</strong> <span class="tag tag-hardware">Hardware</span> - Motor temperature differences 10-20¬∞C (head &lt; tail), current consumption differences 10-20A (head &gt; tail)</div>
      <div id="I4" class="issue"><strong>I4</strong> <span class="tag tag-safety">Safety</span> - Unsafe missions performed over civilian houses and walkways, craft is heavy and parachutes are unreliable</div>
      <div id="I5" class="issue"><strong>I5</strong> <span class="tag tag-hardware">Hardware</span> - Rain caused delays</div>
      <div id="I6" class="issue"><strong>I6</strong> <span class="tag tag-firmware">Firmware</span> <span class="tag tag-planning">Planning</span> - Tracker removal required as RFD needed UART port (CONS port doesn't support RFD currently)</div>
      <div id="I7" class="issue"><strong>I7</strong> <span class="tag tag-documentation">Documentation</span> - Uncertainty regarding in-flight mission updates and set waypoint, required additional tests</div>
      <div id="I8" class="issue"><strong>I8</strong> <span class="tag tag-hardware">Hardware</span> - RC reconnection issue during landing, no control response</div>
      <div id="I9" class="issue"><strong>I9</strong> <span class="tag tag-resources">Resources</span> <span class="tag tag-safety">Safety</span> - Difficulty determining proper altitude margin for final mission, at 30m hover, hard to assess craft height relative to flag poles at monastery</div>
      <div id="I10" class="issue"><strong>I10</strong> <span class="tag tag-sensor">Sensor</span> <span class="tag tag-planning">Planning</span> - Craft landed instead of hovering at 5m due to altitude error, mission ended with craft disarmed (ASML was taken from GPS, but barometer was used for flight, also altimeter should have been used since barometer aren't reliable)</div>
      <div id="I11" class="issue"><strong>I11</strong> <span class="tag tag-sensor">Sensor</span> - Craft proximity to flag poles at monastery due to barometric altitude error</div>
      <div id="I12" class="issue"><strong>I12</strong> <span class="tag tag-firmware">Firmware</span> - No failsafes used since RTL was not viable, Smart RTL untested and therefore not implemented</div>
      <div id="I13" class="issue"><strong>I13</strong> <span class="tag tag-sensor">Sensor</span> <span class="tag tag-planning">Planning</span> - Craft landing position had a lot of offset to the measured position</div>
    </section>

    <section id="suggestions">
      <h3>üí° Suggestions</h3>
      <div id="S1" class="suggestion"><strong>S1</strong> <span class="tag tag-documentation">Documentation</span> - Create comprehensive documentation for all comms modules: antenna setup, web interface, app interface, configuration, parameter setup, data interpretation, FAQ, common issues</div>
      <div id="S2" class="suggestion"><strong>S2</strong> <span class="tag tag-documentation">Documentation</span> - Create dummy cube setup documentation with required accessories list</div>
      <div id="S3" class="suggestion"><strong>S3</strong> <span class="tag tag-documentation">Documentation</span> - Create module documentation (pitot tube, GPS, ESC telem setup, etc.) with setup/teardown procedures from scratch and relevant resource links</div>
      <div id="S4" class="suggestion"><strong>S4</strong> <span class="tag tag-hardware">Hardware</span> <span class="tag tag-safety">Safety</span> - Parachute system needs improvement: carbon fiber plate tolerance issues, servo pin jamming, tube cover requiring tape fitment. Create stretchable fabric cover for ground tests instead of zip ties</div>
      <div id="S5" class="suggestion"><strong>S5</strong> <span class="tag tag-hardware">Hardware</span> <span class="tag tag-firmware">Firmware</span> - Enable CONS port for RFD as secondary comms (with dedicated power supply for 30db operation)</div>
      <div id="S6" class="suggestion"><strong>S6</strong> <span class="tag tag-procedure">Procedure</span> <span class="tag tag-software">Software</span> - Create a basic python TKinter application for standard sequential test procedure: ground values check, preflight checks, module function verification, stabilize response, log analysis, loiter response, auto mission validation (all these tests, user enterable data, log publishing option, flight summary generation, things like analysis can be manual, but should follow steps specified here) (It includes developing a simplified automated log analyzer following flight ops review sheet pattern)</div>
      <div id="S7" class="suggestion"><strong>S7</strong> <span class="tag tag-documentation">Documentation</span> <span class="tag tag-procedure">Procedure</span> - Implement the above mentioned unified documentation system with centralized flight log analysis server storing all records, analysis, and operator responses for easy reference (uses the same log analyses tool, and streamlined procedure tool, each log simply will always be accompanied by a metadata file in JSON format maybe, which is created by our software) (consider all flights, demos, tests, crashes)</div>
      <div id="S8" class="suggestion"><strong>S8</strong> <span class="tag tag-safety">Safety</span> - Implement strict policy: NO missions over areas with unaware civilians. All affected individuals must be notified and consent to risk</div>
      <div id="S9" class="suggestion"><strong>S9</strong> <span class="tag tag-hardware">Hardware</span> - Design rain cover for drone (waterproof tarp is inconvenient)</div>
      <div id="S10" class="suggestion"><strong>S10</strong> <span class="tag tag-hardware">Hardware</span> - Develop waterproof communications housing for weather protection of sensitive electronics.</div>
      <div id="S11" class="suggestion"><strong>S11</strong> <span class="tag tag-documentation">Documentation</span> - Create auto mission features documentation: in-flight updates, set waypoint, mission resume procedures, negative altitude mission and parameters</div>
      <div id="S12" class="suggestion"><strong>S12</strong> <span class="tag tag-hardware">Hardware</span> - RC system requires testing and troubleshooting for reconnection issues</div>
      <div id="S13" class="suggestion"><strong>S13</strong> <span class="tag tag-hardware">Hardware</span> <span class="tag tag-resources">Resource</span> - Consider long range FPV quad or FPV fixed wing for site and flight analysis and live tracking</div>
      <div id="S14" class="suggestion"><strong>S14</strong> <span class="tag tag-hardware">Hardware</span> <span class="tag tag-firmware">Firmware</span> - Implement altimeters (minimum 10-20m range, radar preferred), also look into the following parameter <a href="https://ardupilot.org/copter/docs/parameters.html#ek3-ogn-hgt-mask" target="_blank" rel="noopener noreferrer">EK3_OGN_HGT_MASK</a></div>
      <div id="S15" class="suggestion"><strong>S15</strong> <span class="tag tag-hardware">Hardware</span> - Maybe add omni-directional proximity sensors for collision avoidance</div>
      <div id="S16" class="suggestion"><strong>S16</strong> <span class="tag tag-documentation">Documentation</span> - Test and document Smart RTL for demo mission planning reference</div>
      <div id="S17" class="suggestion"><strong>S17</strong> <span class="tag tag-firmware">Firmware</span> - wp_nav feature like "heading follow next waypoint" instead follow at 0/180 degree to the waypoint (specific to tandem systems)</div>
      <div id="S18" class="suggestion"><strong>S18</strong> <span class="tag tag-customer">Customer</span> - Mast is very inconvenient, should be something like tripod (would be fantastic if we have satcom?)</div>
      <div id="S19" class="suggestion"><strong>S19</strong> <span class="tag tag-hardware">Hardware</span> - Too much motor oiling in comparison to motor documentation.</div>
      <div id="S20" class="suggestion"><strong>S20</strong> <span class="tag tag-hardware">Hardware</span> - Test different perpendicular antenna placement for craft (hopefully non parallel setup)</div>
      </section>
  </main>
  <script src="script.js"></script>
</body>
</html>